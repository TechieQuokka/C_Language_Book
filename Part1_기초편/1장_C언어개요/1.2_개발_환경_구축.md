# 1.2 개발 환경 구축

C언어 프로그래밍을 시작하기 위해서는 적절한 개발 환경을 구축해야 합니다. 이 장에서는 운영체제별로 C언어 개발 환경을 구축하는 방법을 상세히 설명하겠습니다.

## C언어 개발에 필요한 도구

C언어 프로그램을 개발하고 실행하기 위해서는 다음과 같은 도구들이 필요합니다:

1. **텍스트 에디터 또는 IDE**: 소스 코드 작성
2. **컴파일러**: C 소스 코드를 기계어로 변환
3. **디버거**: 프로그램 오류 검출 및 수정
4. **빌드 도구**: 복잡한 프로젝트 관리

## 운영체제별 개발 환경 구축

### 1. Windows 환경

#### 1.1 MinGW-w64 설치 (추천)

**MinGW-w64**는 Windows에서 GCC 컴파일러를 사용할 수 있게 해주는 도구입니다.

**설치 방법:**

1. **MSYS2 다운로드 및 설치**
   - https://www.msys2.org/ 접속
   - `msys2-x86_64-{버전}.exe` 다운로드 후 설치

2. **GCC 설치**
   ```bash
   # MSYS2 터미널에서 실행
   pacman -S mingw-w64-x86_64-gcc
   pacman -S mingw-w64-x86_64-gdb  # 디버거
   pacman -S make
   ```

3. **환경 변수 설정**
   - 시스템 환경 변수 PATH에 `C:\msys64\mingw64\bin` 추가

4. **설치 확인**
   ```cmd
   gcc --version
   gdb --version
   ```

#### 1.2 Visual Studio Community (Microsoft 컴파일러)

**설치 방법:**

1. Visual Studio Community 다운로드
2. 설치 시 "C++를 사용한 데스크톱 개발" 워크로드 선택
3. MSVC 컴파일러와 Windows SDK 포함

**장점:**
- 뛰어난 IDE 환경
- 강력한 디버깅 도구
- IntelliSense 지원

#### 1.3 Dev-C++ (초보자 추천)

간단하고 가벼운 IDE로 초보자에게 적합합니다.

1. https://www.bloodshed.net/devcpp.html 접속
2. 최신 버전 다운로드 및 설치
3. MinGW 컴파일러 포함

### 2. macOS 환경

#### 2.1 Xcode Command Line Tools

**설치 방법:**

```bash
# 터미널에서 실행
xcode-select --install
```

**포함 도구:**
- Clang 컴파일러 (GCC 호환)
- LLDB 디버거
- Make 빌드 도구

#### 2.2 Homebrew를 통한 GCC 설치

```bash
# Homebrew 설치 (없는 경우)
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"

# GCC 설치
brew install gcc
brew install gdb  # 디버거 (서명 필요)
```

#### 2.3 설치 확인

```bash
gcc --version
clang --version
```

### 3. Linux 환경 (Ubuntu/Debian 기준)

#### 3.1 GCC 설치

```bash
# 패키지 목록 업데이트
sudo apt update

# GCC 컴파일러 설치
sudo apt install gcc

# 추가 개발 도구 설치
sudo apt install build-essential  # make, g++, libc6-dev 등 포함
sudo apt install gdb             # 디버거
sudo apt install valgrind        # 메모리 디버거
```

#### 3.2 설치 확인

```bash
gcc --version
make --version
gdb --version
```

## 통합 개발 환경 (IDE) 추천

### 1. Visual Studio Code (크로스 플랫폼)

**장점:**
- 무료, 가벼움
- 풍부한 확장 기능
- 모든 운영체제 지원

**C언어 개발을 위한 확장:**

```
설치해야 할 확장:
1. C/C++ Extension Pack (Microsoft)
2. Code Runner
3. GitLens (옵션)
```

**기본 설정 파일 예시:**

`.vscode/launch.json` (디버깅 설정):
```json
{
    "version": "0.2.0",
    "configurations": [
        {
            "name": "C Debug",
            "type": "cppdbg",
            "request": "launch",
            "program": "${workspaceFolder}/${fileBasenameNoExtension}",
            "args": [],
            "stopAtEntry": false,
            "cwd": "${workspaceFolder}",
            "environment": [],
            "externalConsole": false,
            "MIMode": "gdb",
            "preLaunchTask": "C/C++: gcc build active file"
        }
    ]
}
```

`.vscode/tasks.json` (빌드 설정):
```json
{
    "version": "2.0.0",
    "tasks": [
        {
            "type": "cppbuild",
            "label": "C/C++: gcc build active file",
            "command": "/usr/bin/gcc",
            "args": [
                "-fdiagnostics-color=always",
                "-g",
                "${file}",
                "-o",
                "${fileDirname}/${fileBasenameNoExtension}"
            ],
            "options": {
                "cwd": "${fileDirname}"
            },
            "problemMatcher": ["$gcc"],
            "group": {
                "kind": "build",
                "isDefault": true
            }
        }
    ]
}
```

### 2. CLion (JetBrains)

**장점:**
- 전문적인 C/C++ IDE
- 강력한 코드 분석
- 통합 디버거

**단점:**
- 유료 (학생 무료)
- 무거움

### 3. Code::Blocks

**장점:**
- 무료, 오픈소스
- 크로스 플랫폼
- 플러그인 지원

## 첫 번째 프로그램 테스트

개발 환경 구축이 완료되었는지 확인하기 위해 간단한 프로그램을 작성해봅시다.

### hello.c 파일 생성

```c
#include <stdio.h>

int main() {
    printf("Hello, World!\n");
    printf("C언어 개발 환경 구축 완료!\n");
    return 0;
}
```

### 컴파일 및 실행

#### Windows (MinGW):
```cmd
gcc hello.c -o hello.exe
hello.exe
```

#### macOS/Linux:
```bash
gcc hello.c -o hello
./hello
```

### 예상 출력
```
Hello, World!
C언어 개발 환경 구축 완료!
```

## 컴파일러 옵션 이해

C언어 개발에서 자주 사용되는 GCC 옵션들을 알아봅시다.

### 기본 컴파일 옵션

```bash
# 기본 컴파일
gcc source.c -o program

# 디버그 정보 포함
gcc -g source.c -o program

# 최적화 옵션
gcc -O2 source.c -o program  # -O0(기본), -O1, -O2, -O3

# 경고 메시지 활성화
gcc -Wall -Wextra source.c -o program

# C 표준 지정
gcc -std=c99 source.c -o program    # C99 표준
gcc -std=c11 source.c -o program    # C11 표준
```

### 유용한 컴파일 조합

```bash
# 개발 중 추천 옵션
gcc -Wall -Wextra -g -std=c99 source.c -o program

# 릴리즈 버전 추천 옵션
gcc -Wall -O2 -std=c99 source.c -o program
```

## Makefile 기초

복잡한 프로젝트에서는 Makefile을 사용하여 빌드 과정을 자동화할 수 있습니다.

### 기본 Makefile 예시

```makefile
# 변수 정의
CC=gcc
CFLAGS=-Wall -Wextra -g -std=c99
TARGET=program
SOURCES=main.c utils.c

# 기본 타겟
$(TARGET): $(SOURCES)
	$(CC) $(CFLAGS) $(SOURCES) -o $(TARGET)

# 클린업
clean:
	rm -f $(TARGET)

# .PHONY 선언
.PHONY: clean
```

### Makefile 사용법

```bash
make          # 프로그램 빌드
make clean    # 생성된 파일 삭제
```

## 개발 환경 최적화 팁

### 1. 코딩 스타일 설정

**들여쓰기**: 4칸 공백 또는 탭
**중괄호**: K&R 스타일 또는 Allman 스타일

```c
// K&R 스타일
if (condition) {
    statement;
}

// Allman 스타일
if (condition)
{
    statement;
}
```

### 2. 에디터 설정

**.editorconfig 파일**:
```ini
root = true

[*.c]
charset = utf-8
end_of_line = lf
insert_final_newline = true
trim_trailing_whitespace = true
indent_style = space
indent_size = 4
```

### 3. 코드 포맷팅 도구

**clang-format** 사용:
```bash
# 설치
sudo apt install clang-format  # Ubuntu
brew install clang-format      # macOS

# 사용
clang-format -i source.c  # 파일 직접 수정
```

## 문제 해결

### 자주 발생하는 문제들

#### 1. 컴파일러를 찾을 수 없음
```
'gcc' is not recognized as an internal or external command
```

**해결방법**: 환경 변수 PATH 확인 및 설정

#### 2. 헤더 파일을 찾을 수 없음
```
fatal error: stdio.h: No such file or directory
```

**해결방법**: 개발 도구 재설치 또는 헤더 파일 경로 확인

#### 3. 실행 파일 권한 문제 (Linux/macOS)
```
Permission denied
```

**해결방법**:
```bash
chmod +x program  # 실행 권한 부여
```

## 정리

이번 장에서는 운영체제별 C언어 개발 환경 구축 방법을 학습했습니다:

1. **Windows**: MinGW-w64, Visual Studio, Dev-C++
2. **macOS**: Xcode Command Line Tools, Homebrew
3. **Linux**: GCC, build-essential
4. **IDE**: VS Code, CLion, Code::Blocks
5. **빌드 도구**: Makefile, 컴파일러 옵션

적절한 개발 환경은 효율적인 C언어 학습과 개발의 기초가 됩니다. 자신의 운영체제와 선호도에 맞는 환경을 선택하여 구축해보세요.