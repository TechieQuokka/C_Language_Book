# 3.2 반복문 (Loop Statements)

## 반복문의 개념과 본질

### 반복이란 무엇인가?

반복문은 프로그래밍에서 **동일한 작업을 여러 번 수행하기 위한 제어 구조**입니다. 인간은 단순 반복 작업을 지루해하지만, 컴퓨터는 정확하고 빠르게 같은 작업을 무한히 반복할 수 있습니다. 이것이 바로 컴퓨터의 가장 강력한 능력 중 하나입니다.

### 반복의 필요성

일상생활에서도 우리는 수많은 반복을 경험합니다:
- 시계의 초침이 60번 움직이면 1분
- 계단을 한 칸씩 올라가 목적지에 도달
- 책의 페이지를 하나씩 넘기며 읽기

프로그래밍에서 반복문이 없다면:
- 같은 코드를 수백, 수천 번 복사해서 붙여넣어야 함
- 반복 횟수가 달라질 때마다 프로그램을 다시 작성해야 함
- 코드가 길어지고 유지보수가 어려워짐

### 반복문의 구성 요소

모든 반복문은 다음 세 가지 핵심 요소를 가집니다:

1. **초기화(Initialization)**: 반복을 시작하기 위한 준비 작업
2. **조건 검사(Condition)**: 반복을 계속할지 중단할지 판단하는 기준
3. **갱신(Update)**: 반복할 때마다 상태를 변경하여 종료 조건에 다가가는 작업

이 세 요소가 올바르게 작동해야 반복문이 의도한 대로 실행됩니다.

### 반복문의 종류

C언어에는 세 가지 반복문이 있으며, 각각 다른 상황에 적합합니다:

- **for문**: 반복 횟수가 명확할 때 사용
- **while문**: 조건에 따라 반복할 때 사용
- **do-while문**: 최소 한 번은 실행해야 할 때 사용

## for문 - 계획적인 반복

### for문의 원리

for문은 **반복 횟수를 미리 계획할 수 있을 때** 사용하는 반복문입니다. 마치 "1부터 10까지 세어보자"처럼 시작점과 끝점, 그리고 진행 방식을 명확히 알고 있을 때 적합합니다.

### for문의 구조와 실행 원리

```c
for (초기화; 조건; 갱신) {
    // 반복할 작업
}
```

**실행 순서:**
1. 초기화 - 한 번만 실행
2. 조건 검사 - 참이면 계속, 거짓이면 종료
3. 반복할 작업 실행
4. 갱신 - 다음 반복을 위한 준비
5. 2번으로 돌아가서 조건 다시 검사

이 과정이 조건이 거짓이 될 때까지 계속됩니다.

### for문의 핵심 원리

for문의 강력함은 **반복의 모든 제어 요소가 한 줄에 명시**된다는 점입니다. 코드를 읽는 사람이 반복문을 보는 순간 "얼마나, 어떻게 반복될지"를 즉시 파악할 수 있습니다.

```c
for (int i = 0; i < 10; i++) {
    printf("%d ", i);
}
```

이 코드만 보면:
- i는 0에서 시작 (초기화)
- i가 10보다 작을 때까지 (조건)
- 매번 i를 1씩 증가 (갱신)
- 총 10번 반복될 것이라는 사실을 한눈에 알 수 있습니다

### for문이 적합한 상황

1. **정확한 반복 횟수를 아는 경우**
   - 배열의 모든 요소 처리
   - 1부터 N까지의 합 계산
   - 구구단 출력

2. **규칙적인 진행이 필요한 경우**
   - 2씩 증가: `i += 2`
   - 역순으로 진행: `i--`
   - 특정 배수만: `i *= 2`

### 예제: for문의 다양한 활용

```c
#include <stdio.h>

int main() {
    // 기본적인 카운팅
    printf("1부터 5까지: ");
    for (int i = 1; i <= 5; i++) {
        printf("%d ", i);
    }

    // 역순 카운팅
    printf("\n5부터 1까지: ");
    for (int i = 5; i >= 1; i--) {
        printf("%d ", i);
    }

    // 조건을 만족하는 수만 출력
    printf("\n10 이하의 짝수: ");
    for (int i = 2; i <= 10; i += 2) {
        printf("%d ", i);
    }

    return 0;
}
```

## while문 - 조건 중심의 반복

### while문의 원리

while문은 **특정 조건이 참인 동안 계속 반복**하는 구조입니다. "문이 열릴 때까지 기다리기", "목표에 도달할 때까지 계속 이동하기"처럼 언제 끝날지 정확히 모르지만 특정 상태가 될 때까지 계속해야 하는 상황에 적합합니다.

### while문의 구조와 실행 원리

```c
while (조건) {
    // 반복할 작업
    // 조건을 변경하는 코드가 반드시 필요!
}
```

**실행 순서:**
1. 조건 검사 - 참이면 계속, 거짓이면 종료
2. 반복할 작업 실행
3. 1번으로 돌아가서 조건 다시 검사

### while문의 핵심 원리

while문의 핵심은 **조건 중심의 사고**입니다. "몇 번 반복할까?"가 아니라 "어떤 상태가 될 때까지 반복할까?"를 생각합니다.

```c
int number = 12345;
int digits = 0;

while (number > 0) {
    digits++;
    number /= 10;
}
```

이 코드는 "숫자가 0보다 클 때까지" 계속 자릿수를 세는 작업을 반복합니다. 몇 번 반복될지는 입력 값에 따라 달라지지만, 조건은 명확합니다.

### while문이 적합한 상황

1. **반복 횟수를 미리 알 수 없는 경우**
   - 사용자 입력 받기 (올바른 값이 입력될 때까지)
   - 파일 읽기 (파일 끝까지)
   - 검색 (찾을 때까지)

2. **조건이 복잡한 경우**
   - 여러 변수의 조합으로 이루어진 조건
   - 계산 결과에 따라 달라지는 조건

### 예제: while문의 활용

```c
#include <stdio.h>

int main() {
    // 사용자 입력 검증
    int number;
    printf("양의 정수를 입력하세요: ");
    scanf("%d", &number);

    while (number <= 0) {
        printf("잘못된 입력입니다. 양의 정수를 입력하세요: ");
        scanf("%d", &number);
    }

    printf("입력한 수: %d\n", number);

    // 숫자의 자릿수 계산
    int temp = number;
    int digits = 0;

    while (temp > 0) {
        digits++;
        temp /= 10;
    }

    printf("%d는 %d자리 수입니다.\n", number, digits);

    return 0;
}
```

## do-while문 - 실행 후 판단하는 반복

### do-while문의 원리

do-while문은 **일단 한 번 실행하고 나서 조건을 판단**하는 반복문입니다. "일단 해보고 결과를 확인해서 계속할지 결정하기"와 같은 상황에 적합합니다.

일상생활의 예:
- 게임을 한 판 하고 "또 할래?"라고 묻기
- 음식을 한 입 먹어보고 "맛있으니까 계속 먹을래?"라고 판단하기

### do-while문의 구조와 실행 원리

```c
do {
    // 반복할 작업 (최소 한 번은 실행됨)
} while (조건);
```

**실행 순서:**
1. 반복할 작업 먼저 실행
2. 조건 검사 - 참이면 1번으로, 거짓이면 종료

### do-while문의 핵심 원리

do-while문의 가장 중요한 특징은 **최소 한 번은 반드시 실행**된다는 점입니다. 이는 while문과의 결정적인 차이입니다.

```c
// while문 - 조건이 거짓이면 한 번도 실행 안 됨
int i = 10;
while (i < 5) {
    printf("while: 실행되지 않음\n");
}

// do-while문 - 조건이 거짓이어도 한 번은 실행됨
int j = 10;
do {
    printf("do-while: 한 번은 실행됨\n");
} while (j < 5);
```

### do-while문이 적합한 상황

1. **메뉴 시스템**: 최소 한 번은 메뉴를 보여줘야 함
2. **게임 루프**: 한 게임을 끝내고 "다시 할까?" 물어보기
3. **입력 검증**: 일단 입력받고 검증해서 다시 입력받을지 결정
4. **시뮬레이션**: 한 단계 진행하고 계속할지 판단

### 예제: do-while문의 활용

```c
#include <stdio.h>

int main() {
    char choice;
    int number, guess;

    do {
        // 간단한 숫자 맞히기 게임
        number = 7; // 고정된 답
        printf("\n=== 숫자 맞히기 게임 ===\n");
        printf("1부터 10 사이의 숫자를 맞혀보세요: ");
        scanf("%d", &guess);

        if (guess == number) {
            printf("정답입니다!\n");
        } else {
            printf("틀렸습니다. 정답은 %d였습니다.\n", number);
        }

        printf("다시 하시겠습니까? (y/n): ");
        scanf(" %c", &choice);

    } while (choice == 'y' || choice == 'Y');

    printf("게임을 종료합니다.\n");
    return 0;
}
```

## 반복문 선택의 지혜

### 언제 어떤 반복문을 사용할까?

**for문을 선택하는 경우:**
- 반복 횟수가 명확할 때
- 배열이나 리스트를 순회할 때
- 규칙적인 증감이 필요할 때

**while문을 선택하는 경우:**
- 조건에 따라 반복 여부가 결정될 때
- 반복 횟수를 예측할 수 없을 때
- 복잡한 조건문이 필요할 때

**do-while문을 선택하는 경우:**
- 최소 한 번은 실행되어야 할 때
- 실행 후 조건을 확인해야 할 때
- 메뉴 시스템이나 게임 루프를 만들 때

### 반복문의 설계 원칙

1. **명확한 종료 조건**: 무한루프를 방지하기 위해 반드시 종료 조건이 성립할 수 있도록 설계
2. **적절한 초기화**: 반복 시작 전에 필요한 변수들을 올바르게 초기화
3. **일관된 갱신**: 매 반복마다 종료 조건에 가까워지도록 상태 변경
4. **가독성**: 코드를 읽는 사람이 반복의 의도를 쉽게 파악할 수 있도록 작성

## 실전 예제

### 예제 1: 팩토리얼 계산 (for문)

```c
#include <stdio.h>

int main() {
    int n;
    long long factorial = 1;

    printf("팩토리얼을 구할 수를 입력하세요: ");
    scanf("%d", &n);

    for (int i = 1; i <= n; i++) {
        factorial *= i;
    }

    printf("%d! = %lld\n", n, factorial);
    return 0;
}
```

### 예제 2: 최대공약수 계산 (while문)

```c
#include <stdio.h>

int main() {
    int a, b, temp;

    printf("두 정수를 입력하세요: ");
    scanf("%d %d", &a, &b);

    // 유클리드 호제법
    while (b != 0) {
        temp = b;
        b = a % b;
        a = temp;
    }

    printf("최대공약수: %d\n", a);
    return 0;
}
```

### 예제 3: 계산기 프로그램 (do-while문)

```c
#include <stdio.h>

int main() {
    char operator;
    double num1, num2, result;
    char continue_calc;

    do {
        printf("계산식을 입력하세요 (예: 5 + 3): ");
        scanf("%lf %c %lf", &num1, &operator, &num2);

        switch (operator) {
            case '+':
                result = num1 + num2;
                break;
            case '-':
                result = num1 - num2;
                break;
            case '*':
                result = num1 * num2;
                break;
            case '/':
                if (num2 != 0) {
                    result = num1 / num2;
                } else {
                    printf("0으로 나눌 수 없습니다.\n");
                    continue;
                }
                break;
            default:
                printf("지원하지 않는 연산자입니다.\n");
                continue;
        }

        printf("결과: %.2lf\n", result);
        printf("계속 계산하시겠습니까? (y/n): ");
        scanf(" %c", &continue_calc);

    } while (continue_calc == 'y' || continue_calc == 'Y');

    printf("계산기를 종료합니다.\n");
    return 0;
}
```

## 마무리

반복문은 프로그래밍의 핵심 요소로, 컴퓨터의 반복 처리 능력을 활용하는 강력한 도구입니다. 각 반복문의 원리를 이해하고 상황에 맞게 선택하여 사용한다면, 효율적이고 읽기 쉬운 프로그램을 작성할 수 있습니다.

**핵심 기억사항:**
- for문: 계획적인 반복 (횟수가 명확할 때)
- while문: 조건 중심의 반복 (언제까지 할지 모를 때)
- do-while문: 실행 후 판단하는 반복 (최소 한 번은 해야 할 때)

반복문을 마스터하면 프로그래밍에서 해결할 수 있는 문제의 범위가 크게 넓어집니다.